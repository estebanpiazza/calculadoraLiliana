<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Pagos</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            padding: 16px;
            background-color: #f0f2f5;
        }

        .container {
            background-color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 100%;
            margin: 0 auto;
        }

        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #1a1a1a;
            text-align: center;
        }

        .valores-referencia {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
        }

        .valores-referencia h2 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: #333;
        }

        .valores-lista {
            list-style: none;
            display: grid;
            gap: 8px;
        }

        .valores-lista li {
            display: flex;
            justify-content: space-between;
            color: #555;
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 1rem;
            color: #333;
        }

        input[type="time"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            background-color: white;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        .button-container {
            display: grid;
            gap: 12px;
            margin-top: 24px;
        }

        button {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        button:active {
            transform: scale(0.98);
        }

        #calcularButton {
            background-color: #007bff;
            color: white;
        }

        #calcularButton:hover {
            background-color: #0056b3;
        }

        #copyButton {
            background-color: #28a745;
            color: white;
            display: none;
        }

        #copyButton:hover {
            background-color: #218838;
        }

        #resultado {
            margin-top: 20px;
            padding: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            display: none;
            font-size: 1.1rem;
            line-height: 1.5;
            background-color: #f8f9fa;
            white-space: pre-line;
        }

        @media (min-width: 768px) {
            .container {
                max-width: 500px;
            }

            .button-container {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculadora de Pagos</h1>
        
        <div class="valores-referencia">
            <h2>Valores de Referencia</h2>
            <ul class="valores-lista">
                <li>
                    <span>Valor por hora:</span>
                    <strong>$4000</strong>
                </li>
                <li>
                    <span>Valor media hora:</span>
                    <strong>$2000</strong>
                </li>
                <li>
                    <span>Viáticos:</span>
                    <strong>$1,670</strong>
                </li>
            </ul>
        </div>

        <div class="form-group">
            <label for="horaInicio">Hora de Inicio:</label>
            <input type="time" id="horaInicio" required>
        </div>
        <div class="form-group">
            <label for="horaFin">Hora de Finalización:</label>
            <input type="time" id="horaFin" required>
        </div>
        <div class="checkbox-container">
            <input type="checkbox" id="adelantarProxima">
            <label for="adelantarProxima">Adelantar próxima</label>
        </div>
        <div class="button-container">
            <button id="calcularButton" onclick="calcularPago()">Generar Presupuesto</button>
            <button id="copyButton" onclick="copiarAlPortapapeles()">Copiar</button>
        </div>
        <div id="resultado"></div>
    </div>

    <script>
        const VALOR_HORA = 4000;
        const VALOR_MEDIA_HORA = 2000;
        const VIATICO = 1786;

        function calcularPago() {
            const horaInicioInput = document.getElementById('horaInicio').value;
            const horaFinInput = document.getElementById('horaFin').value;
            const adelantarProxima = document.getElementById('adelantarProxima').checked;
            const resultadoDiv = document.getElementById('resultado');
            const copyButton = document.getElementById('copyButton');

            if (!horaInicioInput || !horaFinInput) {
                alert('Por favor, ingrese ambas horas');
                return;
            }

            const [horaIni, minIni] = horaInicioInput.split(':').map(Number);
            const [horaFin, minFin] = horaFinInput.split(':').map(Number);
            
            let totalMinutos = (horaFin * 60 + minFin) - (horaIni * 60 + minIni);
            if (totalMinutos < 0) totalMinutos += 24 * 60;
            
            const horasCompletas = Math.floor(totalMinutos / 60);
            const tieneMediaHora = totalMinutos % 60 >= 30;
            
            let subtotal = (horasCompletas * VALOR_HORA) + (tieneMediaHora ? VALOR_MEDIA_HORA : 0);
            let total = subtotal + VIATICO;

            if (adelantarProxima) {
                total = total * 2;
                subtotal = subtotal * 2;
            }

            let mensaje = `Liliana, te transferí ${horasCompletas} hora${horasCompletas !== 1 ? 's' : ''}`;
            if (tieneMediaHora) mensaje += ' y media';
            mensaje += ` a $${VALOR_HORA} (subtotal: $${subtotal})`;
            mensaje += `, más viáticos por $${VIATICO}`;
            if (adelantarProxima) mensaje += ' (incluye adelanto de la próxima)';
            mensaje += `.\nTotal: $${total}`;

            resultadoDiv.textContent = mensaje;
            resultadoDiv.style.display = 'block';
            copyButton.style.display = 'block';
        }

        function copiarAlPortapapeles() {
            const resultadoDiv = document.getElementById('resultado');
            const texto = resultadoDiv.textContent;
            
            navigator.clipboard.writeText(texto)
                .then(() => {
                    const copyButton = document.getElementById('copyButton');
                    copyButton.textContent = '¡Copiado!';
                    copyButton.style.backgroundColor = '#218838';
                    
                    setTimeout(() => {
                        copyButton.textContent = 'Copiar';
                        copyButton.style.backgroundColor = '#28a745';
                    }, 2000);
                })
                .catch(err => {
                    alert('Error al copiar: ' + err);
                });
        }
    </script>
</body>
</html>
